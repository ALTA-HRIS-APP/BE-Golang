package api

import (
	"be_golang/klp3/helper"
	"time"

	"github.com/go-resty/resty/v2"
)

func ApiGetUser() {
	// Create a Resty Client
	client := resty.New()

	var response AutoGenerated

	// POST JSON string
	// No need to set content type, if you have client level setting
	_, err := client.R().
		SetHeader("Content-Type", "application/json").
		// SetBody(`{"email": "admin@gmail.com", "password":"12345678"}`).
		SetHeader("Authorization", "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbHMiOiJhZG1pbkBnbWFpbC5jb20iLCJpZCI6IjAyZmZiMDg0LWM3NGEtNDg4OC1iYWUxLWE5YzNhNzZlZjhlZSIsInJvbGUiOiJzdXBlcmFkbWluIiwiaWF0IjoxNjk0Nzc3MDI3LCJleHAiOjE2OTQ3ODA2Mjd9.qvf026-XFNtkgCK0cleleAiTsv2dXuJJHQsivBmJfQU").
		SetResult(&response). // or SetResult(AuthSuccess{}).
		Get("http://pintu2.otixx.online/user/profile")
	if err != nil {
		print(err)
	}
	helper.PrettyPrint(response)
	// fmt.Println(string(resp.Body()))
}

type AutoGenerated struct {
	Meta struct {
		Status  int    `json:"status"`
		Message string `json:"message"`
	} `json:"meta"`
	Data struct {
		ID          string    `json:"id"`
		NamaLengkap string    `json:"nama_lengkap"`
		Surel       string    `json:"surel"`
		NoHp        string    `json:"no_hp"`
		Jabatan     string    `json:"jabatan"`
		KataSandi   string    `json:"kata_sandi"`
		Status      bool      `json:"status"`
		CreatedAt   time.Time `json:"createdAt"`
		UpdatedAt   time.Time `json:"updatedAt"`
		DevisiID    string    `json:"devisiId"`
		RoleID      string    `json:"roleId"`
		Devisi      struct {
			ID        string    `json:"id"`
			Nama      string    `json:"nama"`
			CreatedAt time.Time `json:"createdAt"`
			UpdatedAt time.Time `json:"updatedAt"`
		} `json:"devisi"`
		Role struct {
			ID        string    `json:"id"`
			Nama      string    `json:"nama"`
			CreatedAt time.Time `json:"createdAt"`
			UpdatedAt time.Time `json:"updatedAt"`
		} `json:"role"`
	} `json:"data"`
}
